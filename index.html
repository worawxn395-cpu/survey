<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏û‡∏≠‡πÉ‡∏à</title>
<style>
body{
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  background:#f4f6f9;
}
.card{
  background:white;
  padding:30px;
  border-radius:15px;
  text-align:center;
  box-shadow:0 5px 20px rgba(0,0,0,0.1);
}
.emoji{
  font-size:30px;
  margin:10px;
  cursor:pointer;
}
</style>
</head>
<body>
<div class="card">
  <h2 id="question">Loading...</h2>
  <div id="emojiArea"></div>
  <div id="msg"></div>
</div>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbzy2AT1Aimc6ZSYk4jj_OknheQb-NC4FKx-ePw9R-4A7aeoCK6iXU1Ldtco37lC4bUo/exec";
let answers = {};
let questionsData = [];

fetch(scriptURL)
.then(res => res.json())
.then(data => {
  questionsData = data;
  const area = document.getElementById("emojiArea");
  area.innerHTML = "";

  data.forEach((q, index) => {
    const div = document.createElement("div");
    div.style.marginBottom = "20px";

    const title = document.createElement("h3");
    title.innerText = q[0];
    div.appendChild(title);

    for (let i = 1; i <= 5; i++) {
      const span = document.createElement("span");
      span.className = "emoji";
      span.innerText = q[i];
      span.onclick = () => {
        answers[q[0]] = i;
        span.style.transform = "scale(1.4)";
        setTimeout(()=>span.style.transform="scale(1)",200);
      };
      div.appendChild(span);
    }

    area.appendChild(div);
  });

  const submitBtn = document.createElement("button");
  submitBtn.innerText = "‡∏™‡πà‡∏á‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô";
  submitBtn.style.padding="10px 20px";
  submitBtn.style.fontSize="16px";
  submitBtn.onclick = submitAll;
  area.appendChild(submitBtn);
});

function submitAll(){
  if(Object.keys(answers).length !== questionsData.length){
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠");
    return;
  }

  questionsData.forEach(q=>{
    fetch(scriptURL,{
      method:"POST",
      body:JSON.stringify({
        question:q[0],
        score:answers[q[0]]
      })
    });
  });

  document.getElementById("msg").innerText="‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö üôè";
}
</script>

</body>
</html>
